### [Find Median from Data Stream](https://leetcode.com/problems/find-median-from-data-stream/)

- Use two heaps: max heap for smaller half, min heap for larger half
- Keep heaps balanced (sizes differ by at most 1)
- Median is either top of larger heap or average of both tops

```js copy
var MedianFinder = function() {
    this.maxHeap = []; // smaller half (max heap)
    this.minHeap = []; // larger half (min heap)
};

/** 
 * @param {number} num
 * @return {void}
 */
MedianFinder.prototype.addNum = function(num) {
    // Add to max heap first
    this.maxHeap.push(num);
    this.maxHeap.sort((a, b) => b - a);
    
    // Balance: move largest from max heap to min heap
    if (this.maxHeap.length > 0 && this.minHeap.length > 0 && 
        this.maxHeap[0] > this.minHeap[0]) {
        this.minHeap.push(this.maxHeap.shift());
        this.minHeap.sort((a, b) => a - b);
    }
    
    // Balance sizes
    if (this.maxHeap.length > this.minHeap.length + 1) {
        this.minHeap.push(this.maxHeap.shift());
        this.minHeap.sort((a, b) => a - b);
    }
    
    if (this.minHeap.length > this.maxHeap.length + 1) {
        this.maxHeap.push(this.minHeap.shift());
        this.maxHeap.sort((a, b) => b - a);
    }
};

/**
 * @return {number}
 */
MedianFinder.prototype.findMedian = function() {
    if (this.maxHeap.length > this.minHeap.length) {
        return this.maxHeap[0];
    } else if (this.minHeap.length > this.maxHeap.length) {
        return this.minHeap[0];
    } else {
        return (this.maxHeap[0] + this.minHeap[0]) / 2;
    }
};
```

##### Complexity

- Time: O(log n) for addNum, O(1) for findMedian
- Space: O(n) for both heaps